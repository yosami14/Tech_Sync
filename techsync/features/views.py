# myapp/views.py
from django.http import JsonResponse
from django.views.decorators.csrf import csrf_exempt
import google.generativeai as genai
import os
from dotenv import load_dotenv

# Load environment variables at the module level
load_dotenv()
genai.configure(api_key=os.environ["GEMINI_API_KEY"])

# Configure generation settings
generation_config = {
    "temperature": 1,
    "top_p": 0.95,
    "top_k": 64,
    "max_output_tokens": 8192,
    "response_mime_type": "text/plain",
}

# Initialize the model once
model = genai.GenerativeModel(
    model_name="gemini-1.5-pro",
    generation_config=generation_config,
    system_instruction="**Coda** is your virtual assistant designed to enhance user experience on the Techsync platform. As an intelligent chatbot powered by Gemini, Coda’s primary goal is to provide accurate information, assist with searches, and offer support. Below are detailed instructions on how Coda should act and respond:\n\n---\n\n### **1. Greeting and Introduction**\n\n- **Action:** When a user starts a conversation with Coda, greet them warmly.\n- **Response:** “Hello! I’m Coda, your virtual assistant. How can I help you today? I can assist with finding developers, projects, events, and more.”\n\n### **2. Handling Developer Searches**\n\n- **Action:** When users ask about developers, initiate a search based on the provided query.\n- **Response:**\n    - **Example Query:** “Find developers named Sam.”\n    - **Action:** Construct a search URL using the user’s query (e.g., `http://127.0.0.1:8000/?search_query=sam#`).\n    - **Response:** “Here are the developers named Sam: [List of Developers with Names, Descriptions, and Tags].”\n- **Search Criteria:** Match developers by owner name, description, or tags.\n\n### **3. Handling Project Searches**\n\n- **Action:** When users ask about projects, search for projects based on the given keyword.\n- **Response:**\n    - **Example Query:** “Show me projects related to Django.”\n    - **Action:** Create a search URL using the user’s query (e.g., `http://127.0.0.1:8000/projects/?search_query=django`).\n    - **Response:** “Here are the projects related to Django: [List of Projects with Names, Descriptions, and Tags].”\n- **Search Criteria:** Match projects by description or tags.\n\n### **4. Providing Event Information**\n\n- **Action:** When users request information about events, provide details on upcoming and past events.\n- **Response:**\n    - **Example Query:** “What are the upcoming events?”\n    - **Response:** “Here are the upcoming events: [[List of Events with Dates, Descriptions, and Links](http://127.0.0.1:8000/event/)].”\n\n### **5. Providing Project Information**\n\n- **Action:** When users ask for information about projects, provide summaries of ongoing or recent projects.\n- **Response:**\n    - **Example Query:** “Tell me about the latest projects.”\n    - **Response:** “Here are some of the latest projects: [List of Projects with Summaries and Links].”\n\n### **6. Offering Personalized Recommendations**\n\n- **Action:** Use user interactions and preferences to suggest relevant projects or events.\n- **Response:**\n    - **Example Query:** “Can you recommend some projects for me?”\n    - **Response:** “Based on your interests, you might like these projects: [List of Recommended Projects].”\n\n### **7. Handling FAQs and Providing Help**\n\n- **Action:** Provide answers to frequently asked questions and guide users through common issues.\n- **Response:**\n    - **Example Query:** “How do I register for an event?”\n    - **Response:** “To register for an event, go to the event page and click ‘Register’. Here’s the link: [Event Registration Page].”\n\n### **8. Facilitating Event Registration and Project Submission**\n\n- **Action:** Assist users in registering for events or submitting new project proposals.\n- **Response:**\n    - **Example Query:** “I want to submit a new project.”\n    - **Response:** “You can submit your project using this form: [[Project Submission Form Link].](http://127.0.0.1:8000/event/)”\n\n### **9. Collecting Feedback**\n\n- **Action:** Request feedback from users about their experience with Coda and Techsync.\n- **Response:**\n    - **Example Query:** “I have feedback about the platform.”\n    - **Response:** “We appreciate your feedback! Please share your comments here: [Feedback Form Link].”\n[\n    {\n        \"type\": \"project\",\n        \"id\": \"0aa25891-22df-470f-a765-7d520398514d\",\n        \"title\": \"Tech sync\",\n        \"description\": \"\",\n        \"demo_link\": \"\",\n        \"source_link\": \"\",\n        \"owner__id\": \"e1fda7c4-3505-4570-8e9c-9b5be74cc62b\",\n        \"owner__name\": \"Berket tesfaye\",\n        \"owner__user__email\": \"yosami2023@gmail.com\",\n        \"more_information\": \"http://127.0.0.1:8000/projects/project_detail/0aa25891-22df-470f-a765-7d520398514d\"\n    },\n    {\n        \"type\": \"project\",\n        \"id\": \"d1dd327a-bec3-4e6e-9232-47c454b25ab3\",\n        \"title\": \"TECSYNC\",\n        \"description\": \"XBDDC\",\n        \"demo_link\": \"http://127.0.0.1:8000/create-project/\",\n        \"source_link\": \"https://www.agroautomationdemo.com/\",\n        \"owner__id\": \"452a5a22-2afd-46b4-9145-c355fb624a1e\",\n        \"owner__name\": \"Yeabsra Awgchew\",\n        \"owner__user__email\": \"yeab@gmail.com\",\n        \"more_information\": \"http://127.0.0.1:8000/projects/project_detail/d1dd327a-bec3-4e6e-9232-47c454b25ab3\"\n    },\n    {\n        \"type\": \"project\",\n        \"id\": \"14d0ca97-825e-4896-b68b-15971ab37885\",\n        \"title\": \"School Managment System\",\n        \"description\": \"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.\",\n        \"demo_link\": \"https://www.agroautomationdemo.com/\",\n        \"source_link\": \"https://www.agroautomationdemo.com/\",\n        \"owner__id\": \"452a5a22-2afd-46b4-9145-c355fb624a1e\",\n        \"owner__name\": \"Yeabsra Awgchew\",\n        \"owner__user__email\": \"yeab@gmail.com\",\n        \"more_information\": \"http://127.0.0.1:8000/projects/project_detail/14d0ca97-825e-4896-b68b-15971ab37885\"\n    },\n    {\n        \"type\": \"project\",\n        \"id\": \"c287574b-eebf-41ac-a2a7-3f89293b8512\",\n        \"title\": \"Health Monitoring System\",\n        \"description\": \"Create a health monitoring system that tracks vital signs such as heart rate, blood pressure, and glucose levels. The system will alert healthcare providers and patients in case of abnormalities and provide a dashboard for tracking health metrics over time.\",\n        \"demo_link\": \"\",\n        \"source_link\": \"\",\n        \"owner__id\": \"452a5a22-2afd-46b4-9145-c355fb624a1e\",\n        \"owner__name\": \"Yeabsra Awgchew\",\n        \"owner__user__email\": \"yeab@gmail.com\",\n        \"more_information\": \"http://127.0.0.1:8000/projects/project_detail/c287574b-eebf-41ac-a2a7-3f89293b8512\"\n    },\n    {\n        \"type\": \"project\",\n        \"id\": \"ee8cd745-76db-44f5-ba2f-2607e4248bfb\",\n        \"title\": \"E-Commerce Website with Recommendation System\",\n        \"description\": \"Build an e-commerce website that features a recommendation system to suggest products based on user behavior and preferences. The platform should support user authentication, product listings, shopping carts, and payment processing.\",\n        \"demo_link\": \"\",\n        \"source_link\": \"\",\n        \"owner__id\": \"452a5a22-2afd-46b4-9145-c355fb624a1e\",\n        \"owner__name\": \"Yeabsra Awgchew\",\n        \"owner__user__email\": \"yeab@gmail.com\",\n        \"more_information\": \"http://127.0.0.1:8000/projects/project_detail/ee8cd745-76db-44f5-ba2f-2607e4248bfb\"\n    },\n    {\n        \"type\": \"project\",\n        \"id\": \"af2ce90f-aeae-46a3-8050-7bb138b7f9a6\",\n        \"title\": \"AI-Powered Personal Assistant\",\n        \"description\": \"Create an AI-powered personal assistant that can schedule appointments, send reminders, answer questions, and perform tasks such as sending emails and setting alarms using natural language processing.\",\n        \"demo_link\": \"\",\n        \"source_link\": \"\",\n        \"owner__id\": \"452a5a22-2afd-46b4-9145-c355fb624a1e\",\n        \"owner__name\": \"Yeabsra Awgchew\",\n        \"owner__user__email\": \"yeab@gmail.com\",\n        \"more_information\": \"http://127.0.0.1:8000/projects/project_detail/af2ce90f-aeae-46a3-8050-7bb138b7f9a6\"\n    },\n    {\n        \"type\": \"project\",\n        \"id\": \"bad50a17-e9b1-4f08-ac17-a3589fdb84f4\",\n        \"title\": \"Smart Home Automation System\",\n        \"description\": \"Develop a smart home automation system that allows users to control lights, thermostats, and security cameras remotely via a mobile app. The system will also include features like scheduling, energy consumption monitoring, and real-time alerts.\",\n        \"demo_link\": \"\",\n        \"source_link\": \"\",\n        \"owner__id\": \"452a5a22-2afd-46b4-9145-c355fb624a1e\",\n        \"owner__name\": \"Yeabsra Awgchew\",\n        \"owner__user__email\": \"yeab@gmail.com\",\n        \"more_information\": \"http://127.0.0.1:8000/projects/project_detail/bad50a17-e9b1-4f08-ac17-a3589fdb84f4\"\n    },\n    {\n        \"type\": \"project\",\n        \"id\": \"b89b35f2-360f-4cc4-b7b7-d7a18dc1f9e7\",\n        \"title\": \"Earth Flow Weather App\",\n        \"description\": \"Earth Flow Weather App, a web application that provides weather information for different locations around the world. It includes the following features:\\nDaily Weather Overviews:\\nDisplays the current weather information for a specific location, including temperature, humidity, and wind speed.\\nProvides users with a quick glance at the weather conditions.\\nWeekly Weather Charts:\\nGenerates interactive charts that show trends in temperature, humidity, and pressure over a week.\\nEnables users to analyze weather patterns and gain insights into the selected location.\\nInteractive Map:\\nIntegrates an interactive map powered by Leaflet.\\nAllows users to explore different locations by searching for cities or places.\\nDisplays markers to indicate the selected location and provides a visual representation of weather data distribution.\\nUser Input and Search:\\nEnables users to input the desired location or city name.\\nRetrieves weather information for the specified location upon clicking the search icon.\\nFacilitates exploration of weather conditions for different places of interest.\\nResponsive Design:\\nDesigned to be responsive and compatible with various devices and screen sizes.\\nEnsures an optimal user experience across desktop computers, tablets, and mobile devices.\\nIntegration with OpenWeatherMap API:\\nIntegrates with the OpenWeatherMap API to fetch accurate and up-to-date weather data for the selected location.\\nRelies on the API to provide reliable weather information to users.\\nModern and Intuitive Interface:\\nFeatures a modern and intuitive user interface design.\\nUtilizes a clean and minimalistic aesthetic to enhance navigation and access to weather information.\\nHighcharts Integration:\\nIntegrates the Highcharts library to generate visually appealing and interactive weather charts.\\nEnhances the user experience by providing clear visual representations of weather data.\",\n        \"demo_link\": \"http://yosami14.github.io/Earth-Flow/\",\n        \"source_link\": \"http://yosami14.github.io/Earth-Flow/\",\n        \"owner__id\": \"516ecd75-3648-47db-b327-c7662b1ae2bb\",\n        \"owner__name\": \"Samuel Yohannes\",\n        \"owner__user__email\": \"yosami14@gmail.com\",\n        \"more_information\": \"http://127.0.0.1:8000/projects/project_detail/b89b35f2-360f-4cc4-b7b7-d7a18dc1f9e7\"\n    },\n    {\n        \"type\": \"project\",\n        \"id\": \"16a7ff1d-033d-42fd-90eb-986eb46c5472\",\n        \"title\": \"Arduino Water Pump Controller\",\n        \"description\": \"The Arduino Water Pump Controller revolutionizes agricultural irrigation, offering farmers a sophisticated tool to optimize water usage and crop health. Seamlessly integrating Arduino technology with sensors and pumps, this controller automates watering schedules based on soil moisture levels, weather forecasts, and crop requirements. Its intuitive interface allows farmers to easily customize settings and monitor irrigation activity in real-time, empowering them to make informed decisions and maximize yield while conserving water resources. From small-scale farms to vast agricultural landscapes, this innovative solution is a game-changer, promoting sustainable practices and enhancing productivity in the field.\",\n        \"demo_link\": \"https://www.agroautomationdemo.com/\",\n        \"source_link\": \"https://www.agroautomationdemo.com/\",\n        \"owner__id\": \"5faea236-35f7-4cdd-aff4-4370a7e2161a\",\n        \"owner__name\": \"Nafiyad Adane\",\n        \"owner__user__email\": \"nafi@gmail.com\",\n        \"more_information\": \"http://127.0.0.1:8000/projects/project_detail/16a7ff1d-033d-42fd-90eb-986eb46c5472\"\n    },\n    {\n        \"type\": \"project\",\n        \"id\": \"60bc77e5-70b7-4d92-95ad-d82983a8f71c\",\n        \"title\": \"Techsync\",\n        \"description\": \"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum\",\n        \"demo_link\": \"http://127.0.0.1:8000/create-project/\",\n        \"source_link\": \"http://127.0.0.1:8000/create-project/\",\n        \"owner__id\": \"516ecd75-3648-47db-b327-c7662b1ae2bb\",\n        \"owner__name\": \"Samuel Yohannes\",\n        \"owner__user__email\": \"yosami14@gmail.com\",\n        \"more_information\": \"http://127.0.0.1:8000/projects/project_detail/60bc77e5-70b7-4d92-95ad-d82983a8f71c\"\n    },\n    {\n        \"title\": \"Techsync\",\n        \"description\": \"ckeditor\",\n        \"date\": \"2024-07-25 16:13:00\",\n        \"end_date\": \"2024-07-27 16:13:00\",\n        \"location_type\": \"VENUE\",\n        \"location\": \"American College of Technology, General Wingate Street, Eri Bekentu, Arat Kilo, Addis Ababa, Arada, Addis Ababa, 1415, Ethiopia\",\n        \"venue_name\": \"American College of Technology\",\n        \"place\": \"4th floor resturant\",\n        \"organizer__id\": \"dccde2b4-aab1-4f56-bf22-edf3857a793b\",\n        \"organizer__name\": \"American College Of Technoloy\",\n        \"more_information\": \"http://127.0.0.1:8000/event/event_detail/1b61c8ec-a775-495a-9391-6132b6ffc68f\"\n    },\n    {\n        \"title\": \"The Art of Minimalist Living\",\n        \"description\": \"Moreover, the summit will include a special segment focused on the role of women in technology. This segment will feature inspiring talks by leading female tech entrepreneurs and professionals who have made significant contributions to the industry. The aim is to highlight the achievements of women in tech, discuss the challenges they face, and explore ways to foster a more inclusive and diverse tech community.\\nThe closing ceremony of the summit will be a grand event featuring an awards ceremony to recognize outstanding contributions to the tech industry. Categories will include Best Startup, Most Innovative Product, and Tech Leader of the Year. These awards are not just a celebration of success but also a source of inspiration for others to push the boundaries of what is possible in technology.\\nIn parallel to the main events, there will be numerous side activities such as hackathons, pitch competitions, and tech showcases. The hackathons will provide a competitive yet collaborative environment for developers to solve real-world problems, while the pitch competitions will give startups the platform to present their innovative ideas to potential investors. The tech showcases will be an exciting opportunity to see live demonstrations of emerging technologies and their applications.\\nAttendees will also benefit from exclusive access to downloadable content, including whitepapers, research reports, and presentations from the sessions. This content will serve as a valuable resource for those looking to deepen their understanding of the topics discussed at the summit.\\nThe event will take place at the state-of-the-art Grand Convention Center, equipped with the latest facilities to ensure a seamless experience for all participants. The venue is easily accessible and offers a comfortable environment conducive to learning and networking.\\nTo ensure a comprehensive and enjoyable experience, we have also arranged for various hospitality services, including accommodation packages, dining options, and transportation facilities. Attendees can choose from a range of hotels in close proximity to the venue, ensuring a convenient stay throughout the summit.\\nThe Innovative Tech Summit 2024 is not just an event; it is a movement towards shaping a better future through technology. Whether you are a tech enthusiast, a professional looking to stay ahead of industry trends, an entrepreneur seeking inspiration and connections, or a student eager to learn, this summit has something valuable to offer.\\nJoin us in this exciting journey, where innovation meets opportunity, and let's shape the future of technology together. The Innovative Tech Summit 2024 is your gateway to discovering the next big thing in tech, gaining insights from industry leaders, and connecting with a global network of innovators. Don't miss out on this unparalleled opportunity to be part of a transformative event that will leave a lasting impact on your professional and personal growth.\\nMark your calendars, register now, and prepare to be inspired, enlightened, and empowered at the Innovative Tech Summit 2024. We look forward to welcoming you to an event that promises to be as extraordinary as the future of technology itself.\",\n        \"date\": \"2024-07-30 12:00:00\",\n        \"end_date\": \"2024-07-31 12:00:00\",\n        \"location_type\": \"VENUE\",\n        \"location\": \"American College of Technology, General Wingate Street, Eri Bekentu, Arat Kilo, Addis Ababa, Arada, Addis Ababa, 1415, Ethiopia\",\n        \"venue_name\": \"American College of Technology\",\n        \"place\": \"Second Floor\",\n        \"organizer__id\": \"dccde2b4-aab1-4f56-bf22-edf3857a793b\",\n        \"organizer__name\": \"American College Of Technoloy\",\n        \"more_information\": \"http://127.0.0.1:8000/event/event_detail/3893a5e5-164f-4286-9712-498586e895ba\"\n    },\n    {\n        \"title\": \"Innovative Tech Summit 2024\",\n        \"description\": \"The Innovative Tech Summit 2024 is poised to be a groundbreaking event that brings together visionaries, entrepreneurs, and tech enthusiasts from around the globe. This summit will serve as a platform for discussing the latest advancements in technology, exploring future trends, and fostering collaborations that could redefine the industry. Attendees will have the opportunity to engage with leading experts through keynote sessions, panel discussions, and interactive workshops.\\nThe event kicks off with an opening ceremony featuring a keynote address by a renowned industry leader who will share insights into the evolving tech landscape and the pivotal role innovation plays in shaping our future. This will be followed by a series of thought-provoking sessions that delve into various facets of technology, including artificial intelligence, blockchain, quantum computing, and sustainable tech solutions.\\nParticipants will be encouraged to take part in interactive workshops designed to provide hands-on experience with cutting-edge tools and technologies. These workshops are tailored to cater to different levels of expertise, ensuring that everyone, from novices to seasoned professionals, can gain valuable knowledge and skills.\\nOne of the highlights of the summit is the Innovation Expo, where startups and established companies will showcase their latest products and solutions. This expo is not just an exhibition but a networking hub where ideas can be exchanged, partnerships can be formed, and groundbreaking projects can take root. Attendees will have the chance to see firsthand how these innovations can be applied in various industries, from healthcare to finance to entertainment.\\nIn addition to the technical sessions and workshops, the summit will feature a series of panel discussions on the ethical implications of technology. Topics will include data privacy, cybersecurity, and the impact of automation on the workforce. These discussions aim to foster a deeper understanding of the responsibilities that come with technological advancements and how they can be navigated to ensure a positive impact on society.\\nThe event will also provide ample networking opportunities, with dedicated sessions designed to facilitate meaningful connections between attendees. Whether it's during the coffee breaks, lunch sessions, or the evening networking events, participants will have plenty of chances to meet like-minded individuals, share their experiences, and explore potential collaborations.\\nThe Innovative Tech Summit 2024 promises to be an inspiring and informative event that not only highlights the latest technological advancements but also addresses the challenges and opportunities they present. Join us for a journey into the future of technology, where innovation knows no bounds, and the possibilities are endless.\",\n        \"date\": \"2024-07-17 11:58:00\",\n        \"end_date\": \"2024-07-19 11:58:00\",\n        \"location_type\": \"VENUE\",\n        \"location\": \"American College of Technology, General Wingate Street, Eri Bekentu, Arat Kilo, Addis Ababa, Arada, Addis Ababa, 1415, Ethiopia\",\n        \"venue_name\": \"American College of Technology\",\n        \"place\": \"Second Floor\",\n        \"organizer__id\": \"dccde2b4-aab1-4f56-bf22-edf3857a793b\",\n        \"organizer__name\": \"American College Of Technoloy\",\n        \"more_information\": \"http://127.0.0.1:8000/event/event_detail/216b0fa0-42ec-4f3c-9436-4ee162c550d3\"\n    },\n    {\n        \"title\": \"Event ckeditor test\",\n        \"description\": \"About the Event\\nWhat is Lorem Ipsum?\\nLorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.\\nWhy do we use it?\\nIt is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using 'Content here, content here', making it look like readable English. Many desktop publishing packages and web page editors now use Lorem Ipsum as their default model text, and a search for 'lorem ipsum' will uncover many web sites still in their infancy. Various versions have evolved over the years, sometimes by accident, sometimes on purpose (injected humour and the like).\\n \\nWhere does it come from?\\nContrary to popular belief, Lorem Ipsum is not simply random text. It has roots in a piece of classical Latin literature from 45 BC, making it over 2000 years old. Richard McClintock, a Latin professor at Hampden-Sydney College in Virginia, looked up one of the more obscure Latin words, consectetur, from a Lorem Ipsum passage, and going through the cites of the word in classical literature, discovered the undoubtable source. Lorem Ipsum comes from sections 1.10.32 and 1.10.33 of \\\"\\\"de Finibus Bonorum et Malorum\\\"\\\" (The Extremes of Good and Evil) by Cicero, written in 45 BC. This book is a treatise on the theory of ethics, very popular during the Renaissance. The first line of Lorem Ipsum, \\\"\\\"Lorem ipsum dolor sit amet..\\\"\\\", comes from a line in section 1.10.32.\\nThe standard chunk of Lorem Ipsum used since the 1500s is reproduced below for those interested. Sections 1.10.32 and 1.10.33 from \\\"\\\"de Finibus Bonorum et Malorum\\\"\\\" by Cicero are also reproduced in their exact original form, accompanied by English versions from the 1914 translation by H. Rackham\",\n        \"date\": \"2024-07-12 11:55:00\",\n        \"end_date\": \"2024-07-15 11:55:00\",\n        \"location_type\": \"VENUE\",\n        \"location\": \"Addis Ababa Bole International Airport, BL_02_396 Street, Rwanda, Bole, Addis Ababa, 1044, Ethiopia\",\n        \"venue_name\": \"Addis Ababa Bole International Airport\",\n        \"place\": \"Second Floor\",\n        \"organizer__id\": \"dccde2b4-aab1-4f56-bf22-edf3857a793b\",\n        \"organizer__name\": \"American College Of Technoloy\",\n        \"more_information\": \"http://127.0.0.1:8000/event/event_detail/2f598b55-4b44-477c-8333-50f9dc3541af\"\n    },\n    {\n        \"title\": \"TechSync Launch\",\n        \"description\": \"Techsync Launch: Elevating the Ethiopian Developer Community\\nWe are excited to unveil Techsync, a groundbreaking platform tailored to meet the needs of Ethiopian developers. Techsync is designed to be the ultimate hub for developers to collaborate, showcase their projects. Our platform offers an array of features to support the tech community, including:\\nProject Visibility: Highlight your work and gain recognition from peers and potential employers.\\nPeer-to-Peer and Group Messaging: Seamlessly connect with other developers for knowledge sharing and collaboration.\\nEvent Centralization: Stay informed about the latest tech events, workshops, and meetups.\\nMultilingual Support: Access content and resources in multiple languages, ensuring inclusivity and ease of use.\\nAnd more...\\nBuilt using Django for robust backend support and HTML/CSS/JavaScript for a sleek, user-friendly interface, Techsync also integrates advanced tools like Django Channels for real-time messaging and Google Translate for comprehensive localization services.\\nOur mission with Techsync is to foster a vibrant, interconnected community of developers, driving innovation and growth within Ethiopia's tech ecosystem. We invite you to join us in celebrating this launch and becoming an active part of th\",\n        \"date\": \"2024-07-10 15:11:00\",\n        \"end_date\": \"2024-07-11 15:11:00\",\n        \"location_type\": \"VENUE\",\n        \"location\": \"American College of Technology, General Wingate Street, Eri Bekentu, Arat Kilo, Addis Ababa, Arada, Addis Ababa, 1415, Ethiopia\",\n        \"venue_name\": \"American College of Technology\",\n        \"place\": \"Second Floor\",\n        \"organizer__id\": \"dccde2b4-aab1-4f56-bf22-edf3857a793b\",\n        \"organizer__name\": \"American College Of Technoloy\",\n        \"more_information\": \"http://127.0.0.1:8000/event/event_detail/3d02d2e4-6ff4-4728-b01e-720ae0d905fa\"\n    },\n    {\n        \"title\": \"project\",\n        \"description\": \"af2ce90f-aeae-46a3-8050-7bb138b7f9a6\",\n        \"date\": \"AI-Powered Personal Assistant\",\n        \"end_date\": \"Create an AI-powered personal assistant that can schedule appointments, send reminders, answer questions, and perform tasks such as sending emails and setting alarms using natural language processing.\",\n        \"location_type\": \"\",\n        \"location\": \"\",\n        \"venue_name\": \"452a5a22-2afd-46b4-9145-c355fb624a1e\",\n        \"place\": \"Yeabsra Awgchew\",\n        \"organizer__id\": \"yeab@gmail.com\",\n        \"organizer__name\": \"http://127.0.0.1:8000/projects/project_detail/af2ce90f-aeae-46a3-8050-7bb138b7f9a6\",\n        \"more_information\": \"\"\n    },\n    {\n        \"title\": \"project\",\n        \"description\": \"bad50a17-e9b1-4f08-ac17-a3589fdb84f4\",\n        \"date\": \"Smart Home Automation System\",\n        \"end_date\": \"Develop a smart home automation system that allows users to control lights, thermostats, and security cameras remotely via a mobile app. The system will also include features like scheduling, energy consumption monitoring, and real-time alerts.\",\n        \"location_type\": \"\",\n        \"location\": \"\",\n        \"venue_name\": \"452a5a22-2afd-46b4-9145-c355fb624a1e\",\n        \"place\": \"Yeabsra Awgchew\",\n        \"organizer__id\": \"yeab@gmail.com\",\n        \"organizer__name\": \"http://127.0.0.1:8000/projects/project_detail/bad50a17-e9b1-4f08-ac17-a3589fdb84f4\",\n        \"more_information\": \"\"\n    },\n    {\n        \"title\": \"project\",\n        \"description\": \"b89b35f2-360f-4cc4-b7b7-d7a18dc1f9e7\",\n        \"date\": \"Earth Flow Weather App\",\n        \"end_date\": \"Earth Flow Weather App, a web application that provides weather information for different locations around the world. It includes the following features:\\nDaily Weather Overviews:\\nDisplays the current weather information for a specific location, including temperature, humidity, and wind speed.\\nProvides users with a quick glance at the weather conditions.\\nWeekly Weather Charts:\\nGenerates interactive charts that show trends in temperature, humidity, and pressure over a week.\\nEnables users to analyze weather patterns and gain insights into the selected location.\\nInteractive Map:\\nIntegrates an interactive map powered by Leaflet.\\nAllows users to explore different locations by searching for cities or places.\\nDisplays markers to indicate the selected location and provides a visual representation of weather data distribution.\\nUser Input and Search:\\nEnables users to input the desired location or city name.\\nRetrieves weather information for the specified location upon clicking the search icon.\\nFacilitates exploration of weather conditions for different places of interest.\\nResponsive Design:\\nDesigned to be responsive and compatible with various devices and screen sizes.\\nEnsures an optimal user experience across desktop computers, tablets, and mobile devices.\\nIntegration with OpenWeatherMap API:\\nIntegrates with the OpenWeatherMap API to fetch accurate and up-to-date weather data for the selected location.\\nRelies on the API to provide reliable weather information to users.\\nModern and Intuitive Interface:\\nFeatures a modern and intuitive user interface design.\\nUtilizes a clean and minimalistic aesthetic to enhance navigation and access to weather information.\\nHighcharts Integration:\\nIntegrates the Highcharts library to generate visually appealing and interactive weather charts.\\nEnhances the user experience by providing clear visual representations of weather data.\",\n        \"location_type\": \"http://yosami14.github.io/Earth-Flow/\",\n        \"location\": \"http://yosami14.github.io/Earth-Flow/\",\n        \"venue_name\": \"516ecd75-3648-47db-b327-c7662b1ae2bb\",\n        \"place\": \"Samuel Yohannes\",\n        \"organizer__id\": \"yosami14@gmail.com\",\n        \"organizer__name\": \"http://127.0.0.1:8000/projects/project_detail/b89b35f2-360f-4cc4-b7b7-d7a18dc1f9e7\",\n        \"more_information\": \"\"\n    },\n    {\n        \"title\": \"project\",\n        \"description\": \"16a7ff1d-033d-42fd-90eb-986eb46c5472\",\n        \"date\": \"Arduino Water Pump Controller\",\n        \"end_date\": \"The Arduino Water Pump Controller revolutionizes agricultural irrigation, offering farmers a sophisticated tool to optimize water usage and crop health. Seamlessly integrating Arduino technology with sensors and pumps, this controller automates watering schedules based on soil moisture levels, weather forecasts, and crop requirements. Its intuitive interface allows farmers to easily customize settings and monitor irrigation activity in real-time, empowering them to make informed decisions and maximize yield while conserving water resources. From small-scale farms to vast agricultural landscapes, this innovative solution is a game-changer, promoting sustainable practices and enhancing productivity in the field.\",\n        \"location_type\": \"https://www.agroautomationdemo.com/\",\n        \"location\": \"https://www.agroautomationdemo.com/\",\n        \"venue_name\": \"5faea236-35f7-4cdd-aff4-4370a7e2161a\",\n        \"place\": \"Nafiyad Adane\",\n        \"organizer__id\": \"nafi@gmail.com\",\n        \"organizer__name\": \"http://127.0.0.1:8000/projects/project_detail/16a7ff1d-033d-42fd-90eb-986eb46c5472\",\n        \"more_information\": \"\"\n    },\n    {\n        \"title\": \"project\",\n        \"description\": \"60bc77e5-70b7-4d92-95ad-d82983a8f71c\",\n        \"date\": \"Techsync\",\n        \"end_date\": \"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum\",\n        \"location_type\": \"http://127.0.0.1:8000/create-project/\",\n        \"location\": \"http://127.0.0.1:8000/create-project/\",\n        \"venue_name\": \"516ecd75-3648-47db-b327-c7662b1ae2bb\",\n        \"place\": \"Samuel Yohannes\",\n        \"organizer__id\": \"yosami14@gmail.com\",\n        \"organizer__name\": \"http://127.0.0.1:8000/projects/project_detail/60bc77e5-70b7-4d92-95ad-d82983a8f71c\",\n        \"more_information\": \"\"\n    }\n]\n\n",

)

@csrf_exempt
def chatbot_view(request):
    if request.method == 'POST':
        user_message = request.POST.get('message')
        if not user_message:
            return JsonResponse({'error': 'No message provided'}, status=400)

        try:
            # Create a new chat session for each request
            chat_session = model.start_chat(
                history=[
                    {"role": "user", "parts": [user_message]},
                ]
            )
            response = chat_session.send_message(user_message)
            return JsonResponse({'response': response.text})

        except Exception as e:
            return JsonResponse({'error': str(e)}, status=500)

    return JsonResponse({'error': 'Invalid request method'}, status=405)



# myapp/views.py
from django.http import JsonResponse
from django.views.decorators.csrf import csrf_exempt
import google.generativeai as genai
import os
from dotenv import load_dotenv

# Load environment variables at the module level
load_dotenv()

# Configure Gemini API key
genai.configure(api_key=os.getenv("GEMINI_API_KEY"))
load_dotenv()

print("GEMINI_API_KEY:", os.getenv("GEMINI_API_KEY"))
# Configure generation settings
generation_config = {
    "temperature": 1,
    "top_p": 0.95,
    "top_k": 64,
    "max_output_tokens": 8192,
    "response_mime_type": "text/plain",
}

# Initialize the model once
model = genai.GenerativeModel(
    model_name="gemini-1.5-pro",
    generation_config=generation_config,
    system_instruction="**Coda** is your virtual assistant designed to enhance user experience on the Techsync platform. As an intelligent chatbot powered by Gemini, Coda’s primary goal is to provide accurate information, assist with searches, and offer support. Below are detailed instructions on how Coda should act and respond:\n\n---\n\n### **1. Greeting and Introduction**\n\n- **Action:** When a user starts a conversation with Coda, greet them warmly.\n- **Response:** “Hello! I’m Coda, your virtual assistant. How can I help you today? I can assist with finding developers, projects, events, and more.”\n\n### **2. Handling Developer Searches**\n\n- **Action:** When users ask about developers, initiate a search based on the provided query.\n- **Response:**\n    - **Example Query:** “Find developers named Sam.”\n    - **Action:** Construct a search URL using the user’s query (e.g., `http://127.0.0.1:8000/?search_query=sam#`).\n    - **Response:** “Here are the developers named Sam: [List of Developers with Names, Descriptions, and Tags].”\n- **Search Criteria:** Match developers by owner name, description, or tags.\n\n### **3. Handling Project Searches**\n\n- **Action:** When users ask about projects, search for projects based on the given keyword.\n- **Response:**\n    - **Example Query:** “Show me projects related to Django.”\n    - **Action:** Create a search URL using the user’s query (e.g., `http://127.0.0.1:8000/projects/?search_query=django`).\n    - **Response:** “Here are the projects related to Django: [List of Projects with Names, Descriptions, and Tags].”\n- **Search Criteria:** Match projects by description or tags.\n\n### **4. Providing Event Information**\n\n- **Action:** When users request information about events, provide details on upcoming and past events.\n- **Response:**\n    - **Example Query:** “What are the upcoming events?”\n    - **Response:** “Here are the upcoming events: [[List of Events with Dates, Descriptions, and Links](http://127.0.0.1:8000/event/)].”\n\n### **5. Providing Project Information**\n\n- **Action:** When users ask for information about projects, provide summaries of ongoing or recent projects.\n- **Response:**\n    - **Example Query:** “Tell me about the latest projects.”\n    - **Response:** “Here are some of the latest projects: [List of Projects with Summaries and Links].”\n\n### **6. Offering Personalized Recommendations**\n\n- **Action:** Use user interactions and preferences to suggest relevant projects or events.\n- **Response:**\n    - **Example Query:** “Can you recommend some projects for me?”\n    - **Response:** “Based on your interests, you might like these projects: [List of Recommended Projects].”\n\n### **7. Handling FAQs and Providing Help**\n\n- **Action:** Provide answers to frequently asked questions and guide users through common issues.\n- **Response:**\n    - **Example Query:** “How do I register for an event?”\n    - **Response:** “To register for an event, go to the event page and click ‘Register’. Here’s the link: [Event Registration Page].”\n\n### **8. Facilitating Event Registration and Project Submission**\n\n- **Action:** Assist users in registering for events or submitting new project proposals.\n- **Response:**\n    - **Example Query:** “I want to submit a new project.”\n    - **Response:** “You can submit your project using this form: [[Project Submission Form Link].](http://127.0.0.1:8000/event/)”\n\n### **9. Collecting Feedback**\n\n- **Action:** Request feedback from users about their experience with Coda and Techsync.\n- **Response:**\n    - **Example Query:** “I have feedback about the platform.”\n    - **Response:** “We appreciate your feedback! Please share your comments here: [Feedback Form Link].”\n[\n    {\n        \"type\": \"project\",\n        \"id\": \"0aa25891-22df-470f-a765-7d520398514d\",\n        \"title\": \"Tech sync\",\n        \"description\": \"\",\n        \"demo_link\": \"\",\n        \"source_link\": \"\",\n        \"owner__id\": \"e1fda7c4-3505-4570-8e9c-9b5be74cc62b\",\n        \"owner__name\": \"Berket tesfaye\",\n        \"owner__user__email\": \"yosami2023@gmail.com\",\n        \"more_information\": \"http://127.0.0.1:8000/projects/project_detail/0aa25891-22df-470f-a765-7d520398514d\"\n    },\n    {\n        \"type\": \"project\",\n        \"id\": \"d1dd327a-bec3-4e6e-9232-47c454b25ab3\",\n        \"title\": \"TECSYNC\",\n        \"description\": \"XBDDC\",\n        \"demo_link\": \"http://127.0.0.1:8000/create-project/\",\n        \"source_link\": \"https://www.agroautomationdemo.com/\",\n        \"owner__id\": \"452a5a22-2afd-46b4-9145-c355fb624a1e\",\n        \"owner__name\": \"Yeabsra Awgchew\",\n        \"owner__user__email\": \"yeab@gmail.com\",\n        \"more_information\": \"http://127.0.0.1:8000/projects/project_detail/d1dd327a-bec3-4e6e-9232-47c454b25ab3\"\n    },\n    {\n        \"type\": \"project\",\n        \"id\": \"14d0ca97-825e-4896-b68b-15971ab37885\",\n        \"title\": \"School Managment System\",\n        \"description\": \"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.\",\n        \"demo_link\": \"https://www.agroautomationdemo.com/\",\n        \"source_link\": \"https://www.agroautomationdemo.com/\",\n        \"owner__id\": \"452a5a22-2afd-46b4-9145-c355fb624a1e\",\n        \"owner__name\": \"Yeabsra Awgchew\",\n        \"owner__user__email\": \"yeab@gmail.com\",\n        \"more_information\": \"http://127.0.0.1:8000/projects/project_detail/14d0ca97-825e-4896-b68b-15971ab37885\"\n    },\n    {\n        \"type\": \"project\",\n        \"id\": \"c287574b-eebf-41ac-a2a7-3f89293b8512\",\n        \"title\": \"Health Monitoring System\",\n        \"description\": \"Create a health monitoring system that tracks vital signs such as heart rate, blood pressure, and glucose levels. The system will alert healthcare providers and patients in case of abnormalities and provide a dashboard for tracking health metrics over time.\",\n        \"demo_link\": \"\",\n        \"source_link\": \"\",\n        \"owner__id\": \"452a5a22-2afd-46b4-9145-c355fb624a1e\",\n        \"owner__name\": \"Yeabsra Awgchew\",\n        \"owner__user__email\": \"yeab@gmail.com\",\n        \"more_information\": \"http://127.0.0.1:8000/projects/project_detail/c287574b-eebf-41ac-a2a7-3f89293b8512\"\n    },\n    {\n        \"type\": \"project\",\n        \"id\": \"ee8cd745-76db-44f5-ba2f-2607e4248bfb\",\n        \"title\": \"E-Commerce Website with Recommendation System\",\n        \"description\": \"Build an e-commerce website that features a recommendation system to suggest products based on user behavior and preferences. The platform should support user authentication, product listings, shopping carts, and payment processing.\",\n        \"demo_link\": \"\",\n        \"source_link\": \"\",\n        \"owner__id\": \"452a5a22-2afd-46b4-9145-c355fb624a1e\",\n        \"owner__name\": \"Yeabsra Awgchew\",\n        \"owner__user__email\": \"yeab@gmail.com\",\n        \"more_information\": \"http://127.0.0.1:8000/projects/project_detail/ee8cd745-76db-44f5-ba2f-2607e4248bfb\"\n    },\n    {\n        \"type\": \"project\",\n        \"id\": \"af2ce90f-aeae-46a3-8050-7bb138b7f9a6\",\n        \"title\": \"AI-Powered Personal Assistant\",\n        \"description\": \"Create an AI-powered personal assistant that can schedule appointments, send reminders, answer questions, and perform tasks such as sending emails and setting alarms using natural language processing.\",\n        \"demo_link\": \"\",\n        \"source_link\": \"\",\n        \"owner__id\": \"452a5a22-2afd-46b4-9145-c355fb624a1e\",\n        \"owner__name\": \"Yeabsra Awgchew\",\n        \"owner__user__email\": \"yeab@gmail.com\",\n        \"more_information\": \"http://127.0.0.1:8000/projects/project_detail/af2ce90f-aeae-46a3-8050-7bb138b7f9a6\"\n    },\n    {\n        \"type\": \"project\",\n        \"id\": \"bad50a17-e9b1-4f08-ac17-a3589fdb84f4\",\n        \"title\": \"Smart Home Automation System\",\n        \"description\": \"Develop a smart home automation system that allows users to control lights, thermostats, and security cameras remotely via a mobile app. The system will also include features like scheduling, energy consumption monitoring, and real-time alerts.\",\n        \"demo_link\": \"\",\n        \"source_link\": \"\",\n        \"owner__id\": \"452a5a22-2afd-46b4-9145-c355fb624a1e\",\n        \"owner__name\": \"Yeabsra Awgchew\",\n        \"owner__user__email\": \"yeab@gmail.com\",\n        \"more_information\": \"http://127.0.0.1:8000/projects/project_detail/bad50a17-e9b1-4f08-ac17-a3589fdb84f4\"\n    },\n    {\n        \"type\": \"project\",\n        \"id\": \"b89b35f2-360f-4cc4-b7b7-d7a18dc1f9e7\",\n        \"title\": \"Earth Flow Weather App\",\n        \"description\": \"Earth Flow Weather App, a web application that provides weather information for different locations around the world. It includes the following features:\\nDaily Weather Overviews:\\nDisplays the current weather information for a specific location, including temperature, humidity, and wind speed.\\nProvides users with a quick glance at the weather conditions.\\nWeekly Weather Charts:\\nGenerates interactive charts that show trends in temperature, humidity, and pressure over a week.\\nEnables users to analyze weather patterns and gain insights into the selected location.\\nInteractive Map:\\nIntegrates an interactive map powered by Leaflet.\\nAllows users to explore different locations by searching for cities or places.\\nDisplays markers to indicate the selected location and provides a visual representation of weather data distribution.\\nUser Input and Search:\\nEnables users to input the desired location or city name.\\nRetrieves weather information for the specified location upon clicking the search icon.\\nFacilitates exploration of weather conditions for different places of interest.\\nResponsive Design:\\nDesigned to be responsive and compatible with various devices and screen sizes.\\nEnsures an optimal user experience across desktop computers, tablets, and mobile devices.\\nIntegration with OpenWeatherMap API:\\nIntegrates with the OpenWeatherMap API to fetch accurate and up-to-date weather data for the selected location.\\nRelies on the API to provide reliable weather information to users.\\nModern and Intuitive Interface:\\nFeatures a modern and intuitive user interface design.\\nUtilizes a clean and minimalistic aesthetic to enhance navigation and access to weather information.\\nHighcharts Integration:\\nIntegrates the Highcharts library to generate visually appealing and interactive weather charts.\\nEnhances the user experience by providing clear visual representations of weather data.\",\n        \"demo_link\": \"http://yosami14.github.io/Earth-Flow/\",\n        \"source_link\": \"http://yosami14.github.io/Earth-Flow/\",\n        \"owner__id\": \"516ecd75-3648-47db-b327-c7662b1ae2bb\",\n        \"owner__name\": \"Samuel Yohannes\",\n        \"owner__user__email\": \"yosami14@gmail.com\",\n        \"more_information\": \"http://127.0.0.1:8000/projects/project_detail/b89b35f2-360f-4cc4-b7b7-d7a18dc1f9e7\"\n    },\n    {\n        \"type\": \"project\",\n        \"id\": \"16a7ff1d-033d-42fd-90eb-986eb46c5472\",\n        \"title\": \"Arduino Water Pump Controller\",\n        \"description\": \"The Arduino Water Pump Controller revolutionizes agricultural irrigation, offering farmers a sophisticated tool to optimize water usage and crop health. Seamlessly integrating Arduino technology with sensors and pumps, this controller automates watering schedules based on soil moisture levels, weather forecasts, and crop requirements. Its intuitive interface allows farmers to easily customize settings and monitor irrigation activity in real-time, empowering them to make informed decisions and maximize yield while conserving water resources. From small-scale farms to vast agricultural landscapes, this innovative solution is a game-changer, promoting sustainable practices and enhancing productivity in the field.\",\n        \"demo_link\": \"https://www.agroautomationdemo.com/\",\n        \"source_link\": \"https://www.agroautomationdemo.com/\",\n        \"owner__id\": \"5faea236-35f7-4cdd-aff4-4370a7e2161a\",\n        \"owner__name\": \"Nafiyad Adane\",\n        \"owner__user__email\": \"nafi@gmail.com\",\n        \"more_information\": \"http://127.0.0.1:8000/projects/project_detail/16a7ff1d-033d-42fd-90eb-986eb46c5472\"\n    },\n    {\n        \"type\": \"project\",\n        \"id\": \"60bc77e5-70b7-4d92-95ad-d82983a8f71c\",\n        \"title\": \"Techsync\",\n        \"description\": \"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum\",\n        \"demo_link\": \"http://127.0.0.1:8000/create-project/\",\n        \"source_link\": \"http://127.0.0.1:8000/create-project/\",\n        \"owner__id\": \"516ecd75-3648-47db-b327-c7662b1ae2bb\",\n        \"owner__name\": \"Samuel Yohannes\",\n        \"owner__user__email\": \"yosami14@gmail.com\",\n        \"more_information\": \"http://127.0.0.1:8000/projects/project_detail/60bc77e5-70b7-4d92-95ad-d82983a8f71c\"\n    },\n    {\n        \"title\": \"Techsync\",\n        \"description\": \"ckeditor\",\n        \"date\": \"2024-07-25 16:13:00\",\n        \"end_date\": \"2024-07-27 16:13:00\",\n        \"location_type\": \"VENUE\",\n        \"location\": \"American College of Technology, General Wingate Street, Eri Bekentu, Arat Kilo, Addis Ababa, Arada, Addis Ababa, 1415, Ethiopia\",\n        \"venue_name\": \"American College of Technology\",\n        \"place\": \"4th floor resturant\",\n        \"organizer__id\": \"dccde2b4-aab1-4f56-bf22-edf3857a793b\",\n        \"organizer__name\": \"American College Of Technoloy\",\n        \"more_information\": \"http://127.0.0.1:8000/event/event_detail/1b61c8ec-a775-495a-9391-6132b6ffc68f\"\n    },\n    {\n        \"title\": \"The Art of Minimalist Living\",\n        \"description\": \"Moreover, the summit will include a special segment focused on the role of women in technology. This segment will feature inspiring talks by leading female tech entrepreneurs and professionals who have made significant contributions to the industry. The aim is to highlight the achievements of women in tech, discuss the challenges they face, and explore ways to foster a more inclusive and diverse tech community.\\nThe closing ceremony of the summit will be a grand event featuring an awards ceremony to recognize outstanding contributions to the tech industry. Categories will include Best Startup, Most Innovative Product, and Tech Leader of the Year. These awards are not just a celebration of success but also a source of inspiration for others to push the boundaries of what is possible in technology.\\nIn parallel to the main events, there will be numerous side activities such as hackathons, pitch competitions, and tech showcases. The hackathons will provide a competitive yet collaborative environment for developers to solve real-world problems, while the pitch competitions will give startups the platform to present their innovative ideas to potential investors. The tech showcases will be an exciting opportunity to see live demonstrations of emerging technologies and their applications.\\nAttendees will also benefit from exclusive access to downloadable content, including whitepapers, research reports, and presentations from the sessions. This content will serve as a valuable resource for those looking to deepen their understanding of the topics discussed at the summit.\\nThe event will take place at the state-of-the-art Grand Convention Center, equipped with the latest facilities to ensure a seamless experience for all participants. The venue is easily accessible and offers a comfortable environment conducive to learning and networking.\\nTo ensure a comprehensive and enjoyable experience, we have also arranged for various hospitality services, including accommodation packages, dining options, and transportation facilities. Attendees can choose from a range of hotels in close proximity to the venue, ensuring a convenient stay throughout the summit.\\nThe Innovative Tech Summit 2024 is not just an event; it is a movement towards shaping a better future through technology. Whether you are a tech enthusiast, a professional looking to stay ahead of industry trends, an entrepreneur seeking inspiration and connections, or a student eager to learn, this summit has something valuable to offer.\\nJoin us in this exciting journey, where innovation meets opportunity, and let's shape the future of technology together. The Innovative Tech Summit 2024 is your gateway to discovering the next big thing in tech, gaining insights from industry leaders, and connecting with a global network of innovators. Don't miss out on this unparalleled opportunity to be part of a transformative event that will leave a lasting impact on your professional and personal growth.\\nMark your calendars, register now, and prepare to be inspired, enlightened, and empowered at the Innovative Tech Summit 2024. We look forward to welcoming you to an event that promises to be as extraordinary as the future of technology itself.\",\n        \"date\": \"2024-07-30 12:00:00\",\n        \"end_date\": \"2024-07-31 12:00:00\",\n        \"location_type\": \"VENUE\",\n        \"location\": \"American College of Technology, General Wingate Street, Eri Bekentu, Arat Kilo, Addis Ababa, Arada, Addis Ababa, 1415, Ethiopia\",\n        \"venue_name\": \"American College of Technology\",\n        \"place\": \"Second Floor\",\n        \"organizer__id\": \"dccde2b4-aab1-4f56-bf22-edf3857a793b\",\n        \"organizer__name\": \"American College Of Technoloy\",\n        \"more_information\": \"http://127.0.0.1:8000/event/event_detail/3893a5e5-164f-4286-9712-498586e895ba\"\n    },\n    {\n        \"title\": \"Innovative Tech Summit 2024\",\n        \"description\": \"The Innovative Tech Summit 2024 is poised to be a groundbreaking event that brings together visionaries, entrepreneurs, and tech enthusiasts from around the globe. This summit will serve as a platform for discussing the latest advancements in technology, exploring future trends, and fostering collaborations that could redefine the industry. Attendees will have the opportunity to engage with leading experts through keynote sessions, panel discussions, and interactive workshops.\\nThe event kicks off with an opening ceremony featuring a keynote address by a renowned industry leader who will share insights into the evolving tech landscape and the pivotal role innovation plays in shaping our future. This will be followed by a series of thought-provoking sessions that delve into various facets of technology, including artificial intelligence, blockchain, quantum computing, and sustainable tech solutions.\\nParticipants will be encouraged to take part in interactive workshops designed to provide hands-on experience with cutting-edge tools and technologies. These workshops are tailored to cater to different levels of expertise, ensuring that everyone, from novices to seasoned professionals, can gain valuable knowledge and skills.\\nOne of the highlights of the summit is the Innovation Expo, where startups and established companies will showcase their latest products and solutions. This expo is not just an exhibition but a networking hub where ideas can be exchanged, partnerships can be formed, and groundbreaking projects can take root. Attendees will have the chance to see firsthand how these innovations can be applied in various industries, from healthcare to finance to entertainment.\\nIn addition to the technical sessions and workshops, the summit will feature a series of panel discussions on the ethical implications of technology. Topics will include data privacy, cybersecurity, and the impact of automation on the workforce. These discussions aim to foster a deeper understanding of the responsibilities that come with technological advancements and how they can be navigated to ensure a positive impact on society.\\nThe event will also provide ample networking opportunities, with dedicated sessions designed to facilitate meaningful connections between attendees. Whether it's during the coffee breaks, lunch sessions, or the evening networking events, participants will have plenty of chances to meet like-minded individuals, share their experiences, and explore potential collaborations.\\nThe Innovative Tech Summit 2024 promises to be an inspiring and informative event that not only highlights the latest technological advancements but also addresses the challenges and opportunities they present. Join us for a journey into the future of technology, where innovation knows no bounds, and the possibilities are endless.\",\n        \"date\": \"2024-07-17 11:58:00\",\n        \"end_date\": \"2024-07-19 11:58:00\",\n        \"location_type\": \"VENUE\",\n        \"location\": \"American College of Technology, General Wingate Street, Eri Bekentu, Arat Kilo, Addis Ababa, Arada, Addis Ababa, 1415, Ethiopia\",\n        \"venue_name\": \"American College of Technology\",\n        \"place\": \"Second Floor\",\n        \"organizer__id\": \"dccde2b4-aab1-4f56-bf22-edf3857a793b\",\n        \"organizer__name\": \"American College Of Technoloy\",\n        \"more_information\": \"http://127.0.0.1:8000/event/event_detail/216b0fa0-42ec-4f3c-9436-4ee162c550d3\"\n    },\n    {\n        \"title\": \"Event ckeditor test\",\n        \"description\": \"About the Event\\nWhat is Lorem Ipsum?\\nLorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.\\nWhy do we use it?\\nIt is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using 'Content here, content here', making it look like readable English. Many desktop publishing packages and web page editors now use Lorem Ipsum as their default model text, and a search for 'lorem ipsum' will uncover many web sites still in their infancy. Various versions have evolved over the years, sometimes by accident, sometimes on purpose (injected humour and the like).\\n \\nWhere does it come from?\\nContrary to popular belief, Lorem Ipsum is not simply random text. It has roots in a piece of classical Latin literature from 45 BC, making it over 2000 years old. Richard McClintock, a Latin professor at Hampden-Sydney College in Virginia, looked up one of the more obscure Latin words, consectetur, from a Lorem Ipsum passage, and going through the cites of the word in classical literature, discovered the undoubtable source. Lorem Ipsum comes from sections 1.10.32 and 1.10.33 of \\\"\\\"de Finibus Bonorum et Malorum\\\"\\\" (The Extremes of Good and Evil) by Cicero, written in 45 BC. This book is a treatise on the theory of ethics, very popular during the Renaissance. The first line of Lorem Ipsum, \\\"\\\"Lorem ipsum dolor sit amet..\\\"\\\", comes from a line in section 1.10.32.\\nThe standard chunk of Lorem Ipsum used since the 1500s is reproduced below for those interested. Sections 1.10.32 and 1.10.33 from \\\"\\\"de Finibus Bonorum et Malorum\\\"\\\" by Cicero are also reproduced in their exact original form, accompanied by English versions from the 1914 translation by H. Rackham\",\n        \"date\": \"2024-07-12 11:55:00\",\n        \"end_date\": \"2024-07-15 11:55:00\",\n        \"location_type\": \"VENUE\",\n        \"location\": \"Addis Ababa Bole International Airport, BL_02_396 Street, Rwanda, Bole, Addis Ababa, 1044, Ethiopia\",\n        \"venue_name\": \"Addis Ababa Bole International Airport\",\n        \"place\": \"Second Floor\",\n        \"organizer__id\": \"dccde2b4-aab1-4f56-bf22-edf3857a793b\",\n        \"organizer__name\": \"American College Of Technoloy\",\n        \"more_information\": \"http://127.0.0.1:8000/event/event_detail/2f598b55-4b44-477c-8333-50f9dc3541af\"\n    },\n    {\n        \"title\": \"TechSync Launch\",\n        \"description\": \"Techsync Launch: Elevating the Ethiopian Developer Community\\nWe are excited to unveil Techsync, a groundbreaking platform tailored to meet the needs of Ethiopian developers. Techsync is designed to be the ultimate hub for developers to collaborate, showcase their projects. Our platform offers an array of features to support the tech community, including:\\nProject Visibility: Highlight your work and gain recognition from peers and potential employers.\\nPeer-to-Peer and Group Messaging: Seamlessly connect with other developers for knowledge sharing and collaboration.\\nEvent Centralization: Stay informed about the latest tech events, workshops, and meetups.\\nMultilingual Support: Access content and resources in multiple languages, ensuring inclusivity and ease of use.\\nAnd more...\\nBuilt using Django for robust backend support and HTML/CSS/JavaScript for a sleek, user-friendly interface, Techsync also integrates advanced tools like Django Channels for real-time messaging and Google Translate for comprehensive localization services.\\nOur mission with Techsync is to foster a vibrant, interconnected community of developers, driving innovation and growth within Ethiopia's tech ecosystem. We invite you to join us in celebrating this launch and becoming an active part of th\",\n        \"date\": \"2024-07-10 15:11:00\",\n        \"end_date\": \"2024-07-11 15:11:00\",\n        \"location_type\": \"VENUE\",\n        \"location\": \"American College of Technology, General Wingate Street, Eri Bekentu, Arat Kilo, Addis Ababa, Arada, Addis Ababa, 1415, Ethiopia\",\n        \"venue_name\": \"American College of Technology\",\n        \"place\": \"Second Floor\",\n        \"organizer__id\": \"dccde2b4-aab1-4f56-bf22-edf3857a793b\",\n        \"organizer__name\": \"American College Of Technoloy\",\n        \"more_information\": \"http://127.0.0.1:8000/event/event_detail/3d02d2e4-6ff4-4728-b01e-720ae0d905fa\"\n    },\n    {\n        \"title\": \"project\",\n        \"description\": \"af2ce90f-aeae-46a3-8050-7bb138b7f9a6\",\n        \"date\": \"AI-Powered Personal Assistant\",\n        \"end_date\": \"Create an AI-powered personal assistant that can schedule appointments, send reminders, answer questions, and perform tasks such as sending emails and setting alarms using natural language processing.\",\n        \"location_type\": \"\",\n        \"location\": \"\",\n        \"venue_name\": \"452a5a22-2afd-46b4-9145-c355fb624a1e\",\n        \"place\": \"Yeabsra Awgchew\",\n        \"organizer__id\": \"yeab@gmail.com\",\n        \"organizer__name\": \"http://127.0.0.1:8000/projects/project_detail/af2ce90f-aeae-46a3-8050-7bb138b7f9a6\",\n        \"more_information\": \"\"\n    },\n    {\n        \"title\": \"project\",\n        \"description\": \"bad50a17-e9b1-4f08-ac17-a3589fdb84f4\",\n        \"date\": \"Smart Home Automation System\",\n        \"end_date\": \"Develop a smart home automation system that allows users to control lights, thermostats, and security cameras remotely via a mobile app. The system will also include features like scheduling, energy consumption monitoring, and real-time alerts.\",\n        \"location_type\": \"\",\n        \"location\": \"\",\n        \"venue_name\": \"452a5a22-2afd-46b4-9145-c355fb624a1e\",\n        \"place\": \"Yeabsra Awgchew\",\n        \"organizer__id\": \"yeab@gmail.com\",\n        \"organizer__name\": \"http://127.0.0.1:8000/projects/project_detail/bad50a17-e9b1-4f08-ac17-a3589fdb84f4\",\n        \"more_information\": \"\"\n    },\n    {\n        \"title\": \"project\",\n        \"description\": \"b89b35f2-360f-4cc4-b7b7-d7a18dc1f9e7\",\n        \"date\": \"Earth Flow Weather App\",\n        \"end_date\": \"Earth Flow Weather App, a web application that provides weather information for different locations around the world. It includes the following features:\\nDaily Weather Overviews:\\nDisplays the current weather information for a specific location, including temperature, humidity, and wind speed.\\nProvides users with a quick glance at the weather conditions.\\nWeekly Weather Charts:\\nGenerates interactive charts that show trends in temperature, humidity, and pressure over a week.\\nEnables users to analyze weather patterns and gain insights into the selected location.\\nInteractive Map:\\nIntegrates an interactive map powered by Leaflet.\\nAllows users to explore different locations by searching for cities or places.\\nDisplays markers to indicate the selected location and provides a visual representation of weather data distribution.\\nUser Input and Search:\\nEnables users to input the desired location or city name.\\nRetrieves weather information for the specified location upon clicking the search icon.\\nFacilitates exploration of weather conditions for different places of interest.\\nResponsive Design:\\nDesigned to be responsive and compatible with various devices and screen sizes.\\nEnsures an optimal user experience across desktop computers, tablets, and mobile devices.\\nIntegration with OpenWeatherMap API:\\nIntegrates with the OpenWeatherMap API to fetch accurate and up-to-date weather data for the selected location.\\nRelies on the API to provide reliable weather information to users.\\nModern and Intuitive Interface:\\nFeatures a modern and intuitive user interface design.\\nUtilizes a clean and minimalistic aesthetic to enhance navigation and access to weather information.\\nHighcharts Integration:\\nIntegrates the Highcharts library to generate visually appealing and interactive weather charts.\\nEnhances the user experience by providing clear visual representations of weather data.\",\n        \"location_type\": \"http://yosami14.github.io/Earth-Flow/\",\n        \"location\": \"http://yosami14.github.io/Earth-Flow/\",\n        \"venue_name\": \"516ecd75-3648-47db-b327-c7662b1ae2bb\",\n        \"place\": \"Samuel Yohannes\",\n        \"organizer__id\": \"yosami14@gmail.com\",\n        \"organizer__name\": \"http://127.0.0.1:8000/projects/project_detail/b89b35f2-360f-4cc4-b7b7-d7a18dc1f9e7\",\n        \"more_information\": \"\"\n    },\n    {\n        \"title\": \"project\",\n        \"description\": \"16a7ff1d-033d-42fd-90eb-986eb46c5472\",\n        \"date\": \"Arduino Water Pump Controller\",\n        \"end_date\": \"The Arduino Water Pump Controller revolutionizes agricultural irrigation, offering farmers a sophisticated tool to optimize water usage and crop health. Seamlessly integrating Arduino technology with sensors and pumps, this controller automates watering schedules based on soil moisture levels, weather forecasts, and crop requirements. Its intuitive interface allows farmers to easily customize settings and monitor irrigation activity in real-time, empowering them to make informed decisions and maximize yield while conserving water resources. From small-scale farms to vast agricultural landscapes, this innovative solution is a game-changer, promoting sustainable practices and enhancing productivity in the field.\",\n        \"location_type\": \"https://www.agroautomationdemo.com/\",\n        \"location\": \"https://www.agroautomationdemo.com/\",\n        \"venue_name\": \"5faea236-35f7-4cdd-aff4-4370a7e2161a\",\n        \"place\": \"Nafiyad Adane\",\n        \"organizer__id\": \"nafi@gmail.com\",\n        \"organizer__name\": \"http://127.0.0.1:8000/projects/project_detail/16a7ff1d-033d-42fd-90eb-986eb46c5472\",\n        \"more_information\": \"\"\n    },\n    {\n        \"title\": \"project\",\n        \"description\": \"60bc77e5-70b7-4d92-95ad-d82983a8f71c\",\n        \"date\": \"Techsync\",\n        \"end_date\": \"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum\",\n        \"location_type\": \"http://127.0.0.1:8000/create-project/\",\n        \"location\": \"http://127.0.0.1:8000/create-project/\",\n        \"venue_name\": \"516ecd75-3648-47db-b327-c7662b1ae2bb\",\n        \"place\": \"Samuel Yohannes\",\n        \"organizer__id\": \"yosami14@gmail.com\",\n        \"organizer__name\": \"http://127.0.0.1:8000/projects/project_detail/60bc77e5-70b7-4d92-95ad-d82983a8f71c\",\n        \"more_information\": \"\"\n    }\n]\n\n",

)

@csrf_exempt
def telegram_to_gemini(request):
    if request.method == 'POST':
        user_message = request.POST.get('message')
        if not user_message:
            return JsonResponse({'error': 'No message provided'}, status=400)
        
        try:
            # Create a new chat session for each request
            chat_session = model.start_chat(
                history=[
                    {"role": "user", "parts": [user_message]},
                ]
            )
            response = chat_session.send_message(user_message)
            return JsonResponse({'response': response.text})
        
        except Exception as e:
            return JsonResponse({'error': str(e)}, status=500)
    
    return JsonResponse({'error': 'Invalid request method'}, status=405)





from django.http import JsonResponse
from django.contrib.auth import get_user_model
from django.views.decorators.csrf import csrf_exempt
from users.forms import UserForm
import json

@csrf_exempt
def register_via_telegram(request):
    if request.method == 'POST':
        # Parse JSON data from request
        data = json.loads(request.body)
        username = data.get('username')
        email = data.get('email')
        password1 = data.get('password1')
        password2 = data.get('password2')
        
        # Check if username or email already exists
        User = get_user_model()
        if User.objects.filter(username=username).exists():
            return JsonResponse({'status': 'error', 'errors': {'username': 'Username is already in use.'}}, status=400)
        if User.objects.filter(email=email).exists():
            return JsonResponse({'status': 'error', 'errors': {'email': 'Email is already in use.'}}, status=400)
        
        # Validate password confirmation
        if password1 != password2:
            return JsonResponse({'status': 'error', 'errors': {'password': 'Passwords do not match.'}}, status=400)
        
        # Use the UserForm for additional validation
        form = UserForm(data)
        if form.is_valid():
            user = form.save(commit=False)
            user.username = user.username.lower()
            user.set_password(password1)  # Ensure the password is hashed
            user.save()
            return JsonResponse({'status': 'success', 'message': 'User registered successfully!'}, status=201)
        else:
            errors = form.errors.as_json()
            return JsonResponse({'status': 'error', 'errors': errors}, status=400)
    
    return JsonResponse({'status': 'error', 'message': 'Invalid request method.'}, status=405)




